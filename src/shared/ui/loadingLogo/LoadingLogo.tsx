import React, { useEffect, useRef } from "react";
import { gsap } from "gsap";

export const LoadingLogo: React.FC = () => {
  const pathRef = useRef<SVGPathElement>(null);
  const ellipseRef = useRef<SVGEllipseElement>(null);

  useEffect(() => {
    if (pathRef.current) {
        const pathLength = pathRef.current.getTotalLength();

        gsap.set(pathRef.current, { 
          strokeDasharray: pathLength, 
          strokeDashoffset: pathLength, 
          fillOpacity: 0  // 초기 상태에서 fill을 투명하게 설정
        });
  
        gsap.to(pathRef.current, { 
          strokeDashoffset: 0, 
          duration: 20, 
          ease: "power2.out" 
        });
  
        gsap.to(pathRef.current, { 
          fillOpacity: 1,  // stroke 그린 후에 fill을 서서히 채우기
          duration: 1.5, 
          delay: 2  // path가 다 그려진 후 fill이 채워지도록 딜레이
        });
    }

    if (ellipseRef.current) {
      const length = Math.PI * 2 * 45.246; // 원의 둘레 계산 (rx 기준)
      gsap.fromTo(
        ellipseRef.current,
        { strokeDasharray: length, strokeDashoffset: length },
        { strokeDashoffset: 0, duration: 2, ease: "power2.out", delay: 0.5 } // 0.5초 후 실행
      );
    }
  }, []);

  return (
    <svg xmlns="http://www.w3.org/2000/svg" width="300" height="240" viewBox="0 0 600 480">
        <ellipse 
            ref={ellipseRef}
            cx="288.324" cy="220.933" rx="45.246" ry="44.206"
            style={{fill:"none",stroke:"#25509a",strokeWidth:"8",strokeDasharray:"pathLength",}}
        />
        <path
            ref={pathRef}
            d="M282.617 448.903c-.781-9.958-32.679-5.894-92.636-7.017-39.967-.748-104.125-9.827-101.088 
            2.833 2.31 9.632 75.294 10.186 124.011 9.598 20.958-.252 70.57 5.495 69.713-5.414zm78.03-3.875c62.912-14.26 
            107.53-49.799 134.109-106.592 12.651-27.1 28.076-90.52 12.644-155.462-9.045-38.068-54.37-121.408-84.578-103.966-11.474 
            6.625 6.433 32.26-4.964 21.157-20.856-20.318-65.79-37.198-85.539-37.235-17.298-.032.356 18.683-5.234 29.65-4.929 9.67-14.285 
            7.038-30.04 9.482-23.027 3.57-40.194 14.842-41.654 20.735-1.46 5.892-1.41 12.809 17.51 16.595 18.92 3.787 51.879 10.423 68.325 
            26.627 16.556 16.314 21.789 29.48 21.843 54.964-2.904 127.28-149.025 73.396-149.26 95.703-.09 8.503 67.494 6.872 89.145 3.42 
            96.422-15.37 112.387-177.218-11.892-191.888-6.44-.76-21.358-2.67-21.358-4.073 0-5.567 21.715-8.502 32.783-10.571 9.19-1.718 
            25.497.658 34.334-9.589 11.834-13.72-5.112-25.492 4.24-25.492 16.695 0 55.76 17.25 74.486 37.559 28.296 30.687 41.852 67.356 
            40.765 110.267-.685 27.04-2.285 30.456 5.92 30.867 17.725.886 7.257-79.871-4.823-108.238-13.882-32.596-30.085-62.822-18.962-55.935 45.37 
            28.09 106.102 173.617 14.93 281.838-31.034 36.835-68.798 54.657-122.137 63.264-7.734 1.248-10.008 2.935-10.173 7.022-.375 9.268 
            16.019 5.232 39.58-.109zm36.541-88.967c-12.152-9.786-34.524 28.106-99.272 37.11-44.746 6.223-104.627-2.198-104.872 8.375-.243
            10.543 83.164 10.888 106.575 7.186 49.026-7.751 110.238-42.468 97.569-52.67zm-55.9-7.684c16.508-8.638 22.003-12.605 38.32-28.363 
            22.642-21.866 32.074-41.344 38.397-72.8 8.425-41.914-5.7-86.57-36.95-116.81-8.899-8.612-18.214-19.227-24.037-15.279-7.878 5.34-.96 
            9.252 12.449 20.74 12.605 10.8 19.156 20.294 26.695 35.77 8.997 18.47 10.255 23.626 11.201 45.946.872 20.55-.013 28.384-4.843 
            42.884-17.557 52.7-52.403 68.583-67.773 78.135-15.45 9.602-22.353 8.56-19.062 13.962 2.503 4.11 8.753 4.633 25.603-4.185zM187.181 
            312.54c0-5.272-2.454-4.999-49.028-5.72-28.405-.44-49.577-.197-51.093 1.341-1.427 1.448-2.38 4.199-1.47 6.605 1.444 3.818 9.437 
            3.608 52.02 3.894 47.52.32 49.57-.844 49.57-6.12zm-87.52-38.435c-.171-3.636-1.614-17.196-3.206-30.133-7.241-58.85 10.809-110.773 
            53.571-154.104 32.536-32.97 63.632-48.684 108.728-54.949 26.202-3.64 57.128-.054 83.594 9.693 12.916 4.756 18.777 5.756 21.298
            3.633 1.914-1.611 2.724-4.168 1.802-5.681-3.046-5.002-25.102-13.347-45.991-17.402C213.626 4.62 112.526 69.921 86.752 175.47c-7.604 
            31.137-4.54 98.892 4.75 105.052 5.025 3.332 8.491.606 8.16-6.417zm81.972 4.663c.803-2.124-1.795-11.963-4.155-22.308-11.778-51.631 
            8.021-104.11 52.614-131.862 11.683-7.27 14.855-11.784 8.314-14.33-7.357-2.865-26.153 7.685-42.384 23.788-31.911 31.66-44.541 76.8-33.516 
            119.786 6.157 24.005 15.078 35.63 19.127 24.926zm46.246-.34c.874-2.31-1.634-8.92-5.574-14.688-43.303-63.395 37.499-110.464 12.503-110.464-6.548 0-22.955 17.747-30.533 
            33.027-8.982 18.112-10.218 46.397-2.885 66.053 5.527 14.817 16.868 30.275 22.211 30.275 1.479 0 3.404-1.891 4.278-4.203z" 
            style={{fill:"#25509a",stroke:"#25509a",strokeWidth:"1.5",strokeDasharray:"pathLength"}}
        />
    </svg>
  );
};

// export const LoadingLogo: React.FC = () => {
//     return (
        // <svg xmlns="http://www.w3.org/2000/svg" width="300" height="240" viewBox="0 0 600 480">
        //     <ellipse 
        //         ref={ellipseRef}
        //         cx="288.324" cy="220.933" rx="45.246" ry="44.206"
        //         style={{display:"inline",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#25509a",strokeWidth:"10.9852",strokeDasharray:"none",strokeOpacity:1}}
        //     />
        //     <path
        //         ref={pathRef}
        //         d="M282.617 448.903c-.781-9.958-32.679-5.894-92.636-7.017-39.967-.748-104.125-9.827-101.088 
        //         2.833 2.31 9.632 75.294 10.186 124.011 9.598 20.958-.252 70.57 5.495 69.713-5.414zm78.03-3.875c62.912-14.26 
        //         107.53-49.799 134.109-106.592 12.651-27.1 28.076-90.52 12.644-155.462-9.045-38.068-54.37-121.408-84.578-103.966-11.474 
        //         6.625 6.433 32.26-4.964 21.157-20.856-20.318-65.79-37.198-85.539-37.235-17.298-.032.356 18.683-5.234 29.65-4.929 9.67-14.285 
        //         7.038-30.04 9.482-23.027 3.57-40.194 14.842-41.654 20.735-1.46 5.892-1.41 12.809 17.51 16.595 18.92 3.787 51.879 10.423 68.325 
        //         26.627 16.556 16.314 21.789 29.48 21.843 54.964-2.904 127.28-149.025 73.396-149.26 95.703-.09 8.503 67.494 6.872 89.145 3.42 
        //         96.422-15.37 112.387-177.218-11.892-191.888-6.44-.76-21.358-2.67-21.358-4.073 0-5.567 21.715-8.502 32.783-10.571 9.19-1.718 
        //         25.497.658 34.334-9.589 11.834-13.72-5.112-25.492 4.24-25.492 16.695 0 55.76 17.25 74.486 37.559 28.296 30.687 41.852 67.356 
        //         40.765 110.267-.685 27.04-2.285 30.456 5.92 30.867 17.725.886 7.257-79.871-4.823-108.238-13.882-32.596-30.085-62.822-18.962-55.935 45.37 
        //         28.09 106.102 173.617 14.93 281.838-31.034 36.835-68.798 54.657-122.137 63.264-7.734 1.248-10.008 2.935-10.173 7.022-.375 9.268 
        //         16.019 5.232 39.58-.109zm36.541-88.967c-12.152-9.786-34.524 28.106-99.272 37.11-44.746 6.223-104.627-2.198-104.872 8.375-.243
        //         10.543 83.164 10.888 106.575 7.186 49.026-7.751 110.238-42.468 97.569-52.67zm-55.9-7.684c16.508-8.638 22.003-12.605 38.32-28.363 
        //         22.642-21.866 32.074-41.344 38.397-72.8 8.425-41.914-5.7-86.57-36.95-116.81-8.899-8.612-18.214-19.227-24.037-15.279-7.878 5.34-.96 
        //         9.252 12.449 20.74 12.605 10.8 19.156 20.294 26.695 35.77 8.997 18.47 10.255 23.626 11.201 45.946.872 20.55-.013 28.384-4.843 
        //         42.884-17.557 52.7-52.403 68.583-67.773 78.135-15.45 9.602-22.353 8.56-19.062 13.962 2.503 4.11 8.753 4.633 25.603-4.185zM187.181 
        //         312.54c0-5.272-2.454-4.999-49.028-5.72-28.405-.44-49.577-.197-51.093 1.341-1.427 1.448-2.38 4.199-1.47 6.605 1.444 3.818 9.437 
        //         3.608 52.02 3.894 47.52.32 49.57-.844 49.57-6.12zm-87.52-38.435c-.171-3.636-1.614-17.196-3.206-30.133-7.241-58.85 10.809-110.773 
        //         53.571-154.104 32.536-32.97 63.632-48.684 108.728-54.949 26.202-3.64 57.128-.054 83.594 9.693 12.916 4.756 18.777 5.756 21.298
        //         3.633 1.914-1.611 2.724-4.168 1.802-5.681-3.046-5.002-25.102-13.347-45.991-17.402C213.626 4.62 112.526 69.921 86.752 175.47c-7.604 
        //         31.137-4.54 98.892 4.75 105.052 5.025 3.332 8.491.606 8.16-6.417zm81.972 4.663c.803-2.124-1.795-11.963-4.155-22.308-11.778-51.631 
        //         8.021-104.11 52.614-131.862 11.683-7.27 14.855-11.784 8.314-14.33-7.357-2.865-26.153 7.685-42.384 23.788-31.911 31.66-44.541 76.8-33.516 
        //         119.786 6.157 24.005 15.078 35.63 19.127 24.926zm46.246-.34c.874-2.31-1.634-8.92-5.574-14.688-43.303-63.395 37.499-110.464 12.503-110.464-6.548 0-22.955 17.747-30.533 
        //         33.027-8.982 18.112-10.218 46.397-2.885 66.053 5.527 14.817 16.868 30.275 22.211 30.275 1.479 0 3.404-1.891 4.278-4.203z" 
        //         style={{display:"inline",fill:"#25509a",fillOpacity:"1",stroke:"#25509a",strokeWidth:"2.45773",strokeLinecap:"square",strokeLinejoin:"miter",strokeDasharray:"none",strokeOpacity:"1",paintOrder:"stroke fill markers"}}
        //     />
        // </svg>
//     );
// };

